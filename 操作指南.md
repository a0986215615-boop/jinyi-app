# 📱 部署操作指南 - 跟著做就對了！

**開始時間**：2025-12-18 21:37

---

## ✅ 已經準備好的東西

1. ✅ Supabase 資料庫 - 已設置完成
2. ✅ GitHub 倉庫 - 已創建：https://github.com/a0986215615-boop/jinyi-app
3. ✅ Gemini API Key - 已複製到剪貼板

**現在我們要做的就是：把代碼推送到 GitHub，然後部署！**

---

## 🚀 第一部分：使用 GitHub Desktop 推送代碼

### 步驟 1：下載 GitHub Desktop

**我已經為您打開了下載頁面**（在瀏覽器中）

1. **在瀏覽器中找到 GitHub Desktop 頁面**
   - 應該會看到 "Download now" 或 "Download for macOS" 按鈕
   - 點擊這個按鈕
   - 文件會下載到您的「下載」文件夾

2. **安裝 GitHub Desktop**
   - 在「下載」文件夾中找到 `GitHubDesktop.dmg` 文件
   - 雙擊打開
   - 將 GitHub Desktop 圖標拖到 Applications 文件夾
   - 等待複製完成

3. **打開 GitHub Desktop**
   - 到 Applications 文件夾
   - 雙擊 GitHub Desktop
   - 如果彈出安全警告，點擊「打開」

---

### 步驟 2：登錄 GitHub Desktop

1. **首次打開時**
   - 會看到歡迎畫面
   - 點擊 **"Sign in to GitHub.com"**

2. **在瀏覽器中登錄**
   - 會自動打開瀏覽器
   - 輸入您的 GitHub 帳號和密碼
   - 帳號：**a0986215615-boop**
   - 登錄後點擊 **"Authorize desktop"**

3. **返回 GitHub Desktop**
   - 瀏覽器會提示「打開 GitHub Desktop」
   - 點擊「打開」或「允許」

4. **配置 Git**
   - 會要求您輸入名字和郵箱
   - Name: 輸入您的名字（例如：Jack）
   - Email: 使用您的 GitHub 郵箱
   - 點擊 **"Continue"** 或 **"完成"**

---

### 步驟 3：添加您的專案

1. **在 GitHub Desktop 中**
   - 點擊左上角：**File → Add Local Repository**
   - 或者點擊中間的 **"Add an Existing Repository from your Hard Drive"**

2. **選擇專案文件夾**
   - 點擊 **"Choose..."** 按鈕
   - 在彈出的文件選擇器中：
     - 左側選擇 **"下載"** (Downloads)
     - 找到並雙擊進入 **"測試 8 2"** 文件夾
     - 點擊右下角的 **"Open"** 或 **"選擇"**

3. **創建 Git 倉庫**
   - 會看到警告：**"This directory does not appear to be a Git repository"**
   - 點擊藍色按鈕：**"create a repository"**

4. **填寫倉庫信息**
   - Name: 保持 **"測試 8 2"** 或改成 **"jinyi-app"**
   - Description: **"靜夷應用 - AI 助手應用"**
   - Git Ignore: **None**（我們已經有了）
   - License: **None**
   - 點擊底部的藍色按鈕：**"Create Repository"**

---

### 步驟 4：提交更改

1. **查看更改**
   - 左側會顯示所有文件（在 "Changes" 標籤下）
   - 應該會看到很多文件，全部都打勾 ✓

2. **填寫提交信息**
   - 在左下角找到 "Summary" 欄位
   - 輸入：**Initial commit with Supabase integration**
   - "Description" 可以留空

3. **提交到本地**
   - 點擊藍色按鈕：**"Commit to main"**
   - 等待幾秒鐘，左側的文件列表會清空

---

### 步驟 5：發布到 GitHub

1. **發布倉庫**
   - 頂部中間會出現：**"Publish repository"** 按鈕
   - 點擊這個按鈕

2. **配置發布選項**
   在彈出的窗口中：
   - **Name**: `jinyi-app`
   - **Description**: 自動填寫
   - **❗ 重要**：**取消勾選** "Keep this code private"
     - 要確保這個選項**沒有打勾**
     - 因為免費的 Cloudflare Pages 需要公開倉庫
   - **Organization**: 確認選擇的是 **"a0986215615-boop"**

3. **發布**
   - 點擊底部藍色按鈕：**"Publish Repository"**
   - 會看到上傳進度條
   - 等待上傳完成（可能需要 1-3 分鐘，因為有 node_modules）

4. **確認成功**
   - 完成後，頂部會顯示：**"Fetch origin"**
   - 這表示代碼已成功推送到 GitHub！ 🎉

---

## 🌐 第二部分：部署到 Cloudflare Pages

### 步驟 6：打開 Cloudflare Dashboard

1. **訪問 Cloudflare**
   - 打開瀏覽器
   - 訪問：**https://dash.cloudflare.com**
   - 完成人機驗證（勾選「我不是機器人」）
   - 登錄您的 Cloudflare 帳戶

2. **導航到 Workers & Pages**
   - 登錄後，在左側菜單中
   - 點擊：**"Workers & Pages"**

---

### 步驟 7：創建新的 Pages 專案

1. **創建應用**
   - 點擊右上角藍色按鈕：**"Create application"**
   - 選擇 **"Pages"** 標籤（不是 Workers）
   - 點擊：**"Connect to Git"**

2. **連接 GitHub**（如果是第一次）
   - 點擊：**"Connect GitHub"**
   - 在彈出窗口中，點擊：**"Authorize Cloudflare-Pages"**
   - 可能需要再次輸入 GitHub 密碼
   - 選擇：**"All repositories"** 或 **"Only select repositories"**
     - 如果選擇後者，勾選 **"jinyi-app"**
   - 點擊：**"Install & Authorize"**

3. **選擇倉庫**
   - 在倉庫列表中找到：**"a0986215615-boop/jinyi-app"**
   - 點擊旁邊的：**"Begin setup"**

---

### 步驟 8：配置構建設置

**填寫以下信息：**

#### 專案名稱和分支
```
Project name: jinyi-app
Production branch: main
```

#### 構建設置
1. **Framework preset**
   - 點擊下拉菜單
   - 滾動並選擇：**"Vite"**
   - 選擇後會自動填寫下面兩項

2. 確認自動填寫的值：
   ```
   Build command: npm run build
   Build output directory: dist
   ```

3. **Root directory (path)**
   - 保持為：**"/"**（默認）

---

### 步驟 9：添加環境變量（非常重要！）

1. **展開環境變量部分**
   - 找到並點擊：**"Environment variables (advanced)"**
   - 會展開顯示環境變量設置區域

2. **添加第一個變量：Supabase URL**
   - Variable name: `VITE_SUPABASE_URL`
   - Value: `https://zntvofpaohnouepquxke.supabase.co`
   - 點擊：**"Add variable"**

3. **添加第二個變量：Supabase Key**
   - Variable name: `VITE_SUPABASE_ANON_KEY`
   - Value: `sb_publishable_TZOgnWwcDA1bRfHghcRSyg_lbmnh4jb`
   - 點擊：**"Add variable"**

4. **添加第三個變量：Gemini API Key**
   - Variable name: `GEMINI_API_KEY`
   - Value 欄位：
     - **按 Cmd+V 粘貼**（您的 API key 在剪貼板中）
     - 應該是一個以 "AIza" 開頭的長字串
   - 點擊：**"Add variable"**

5. **確認**
   - 應該看到 3 個環境變量都已添加
   - 每個都有名稱和值（值會被部分隱藏，這是正常的）

---

### 步驟 10：部署！

1. **最後檢查**
   確認以下設置都正確：
   - ✅ Project name: jinyi-app
   - ✅ Production branch: main
   - ✅ Framework preset: Vite
   - ✅ Build command: npm run build
   - ✅ Build output directory: dist
   - ✅ 3 個環境變量已添加

2. **開始部署**
   - 滾動到頁面底部
   - 點擊綠色大按鈕：**"Save and Deploy"**

3. **觀看構建過程**
   - 頁面會跳轉到部署日誌
   - 您會看到實時的構建過程：
     ```
     🔧 Initializing build environment
     📦 Cloning repository
     📥 Installing dependencies (這步會比較久，約 1-2 分鐘)
     🏗️ Building application
     🚀 Deploying to Cloudflare
     ```
   - 整個過程約 3-5 分鐘

---

### 步驟 11：部署成功！

1. **看到成功消息**
   - 當看到 **"Success!"** 和綠色勾勾 ✅
   - 下方會顯示您的網址：
     ```
     https://jinyi-app.pages.dev
     ```

2. **訪問您的應用**
   - 點擊這個網址
   - 會在新標籤頁中打開您的應用
   - 🎉 恭喜！您的應用已經上線了！

3. **測試功能**
   - 使用應用的各種功能
   - 測試數據保存是否正常
   - 刷新頁面確認數據持久化

---

## 🌍 （可選）第三部分：配置自定義域名

如果您想使用 `jinyi.us.kg` 域名：

### 步驟 12：添加自定義域名

1. **在 Cloudflare Pages 專案頁面**
   - 點擊頂部的 **"Custom domains"** 標籤
   - 點擊：**"Set up a custom domain"**

2. **輸入域名**
   - 在輸入框中輸入：`jinyi.us.kg`
   - 點擊：**"Continue"**

3. **激活域名**
   - Cloudflare 會檢測到這是您管理的域名
   - 點擊：**"Activate domain"**
   - DNS 記錄會自動配置

4. **等待生效**
   - 約 1-5 分鐘
   - 之後訪問：`https://jinyi.us.kg`
   - 您的應用就可以通過自定義域名訪問了！

---

## ✅ 完成檢查清單

請確認以下項目：

- [ ] GitHub Desktop 已下載並安裝
- [ ] 已登錄 GitHub Desktop
- [ ] 專案已添加到 GitHub Desktop
- [ ] 代碼已提交（Commit）
- [ ] 代碼已發布到 GitHub（Publish）
- [ ] 已登錄 Cloudflare Dashboard
- [ ] 已創建 Pages 專案並連接 GitHub
- [ ] 已配置構建設置（Vite, npm run build, dist）
- [ ] 已添加 3 個環境變量
- [ ] 部署成功並可以訪問應用
- [ ] （可選）已配置自定義域名

---

## 🎉 恭喜完成！

您的應用現在已經：
- ✅ 部署到全球 CDN
- ✅ 支持自動 HTTPS
- ✅ 連接到 Supabase 資料庫
- ✅ 支持跨設備同步
- ✅ 每次推送代碼會自動重新部署

### 您的應用地址：
- **Cloudflare Pages**: https://jinyi-app.pages.dev
- **自定義域名**（如果配置了）: https://jinyi.us.kg

---

## 📱 後續使用

### 如何更新應用？

每次您修改代碼後：

1. 打開 GitHub Desktop
2. 會自動檢測到更改
3. 填寫 Commit message（描述您的更改）
4. 點擊 "Commit to main"
5. 點擊頂部的 "Push origin"
6. Cloudflare 會自動重新部署（約 2-3 分鐘）

### 查看部署狀態

- 訪問 Cloudflare Dashboard
- Workers & Pages → jinyi-app
- 點擊 "Deployments" 查看所有部署記錄

---

## 💡 小技巧

- 📱 將應用添加到手機主屏幕，像原生 App 一樣使用
- 🌍 Cloudflare 的全球 CDN 確保快速訪問
- 💾 Supabase 提供可靠的數據存儲
- 🔄 每次 Git push 都會自動部署，無需手動操作

---

**如果遇到任何問題，隨時告訴我！我會幫您解決。** 🚀

# ğŸš€ Cloudflare Pages éƒ¨ç½²æŒ‡å—

## ğŸ“Š ç•¶å‰ç‹€æ…‹

### Git å€‰åº«ç‹€æ…‹ âœ…
- **æœ€æ–°æäº¤**: `cc1311c - docs: æ–°å¢ç³»çµ±è¨­å®šé é¢ä½¿ç”¨èªªæ˜æ–‡æª”`
- **ä¸Šä¸€å€‹é‡è¦æäº¤**: `dc150b4 - feat: é‡æ–°è¨­è¨ˆç³»çµ±è¨­å®šé é¢ï¼Œæ–°å¢å³æ™‚é è¦½èˆ‡é›²ç«¯åŒæ­¥ç‹€æ…‹`
- **GitHub åŒæ­¥**: âœ… å·²æ¨é€æˆåŠŸ

### ç·šä¸Šç¶²ç«™ç‹€æ…‹ âš ï¸
- **ç¶²å€**: https://jinyi-app.pages.dev
- **éƒ¨ç½²ç‹€æ…‹**: éƒ¨åˆ†å…§å®¹å·²æ›´æ–°ï¼Œä½†**å°šæœªå®Œå…¨éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬**
- **å•é¡Œ**: å‰¯æ¨™é¡Œä»é¡¯ç¤ºèˆŠå€¼ã€Œå¾æ™ºæ…§é ç´„é–‹å§‹ã€ï¼Œæ‡‰ç‚ºã€Œå¾ç¾å¥½çš„ä¸€å¤©é–‹å§‹ã€

---

## ğŸ”§ è§£æ±ºæ–¹æ¡ˆï¼šæ‰‹å‹•è§¸ç™¼ Cloudflare Pages éƒ¨ç½²

### æ–¹æ³• 1: é€é Cloudflare Dashboardï¼ˆæ¨è–¦ï¼‰

#### æ­¥é©Ÿ 1: ç™»å…¥ Cloudflare Dashboard
1. å‰å¾€ https://dash.cloudflare.com
2. è¼¸å…¥ä½ çš„å¸³è™Ÿå¯†ç¢¼ç™»å…¥
3. å®Œæˆäººæ©Ÿé©—è­‰ï¼ˆå¦‚æœæœ‰æç¤ºï¼‰

#### æ­¥é©Ÿ 2: é€²å…¥ Workers & Pages
1. åœ¨å·¦å´å°èˆªæ¬„æ‰¾åˆ°ä¸¦é»æ“Š **"Workers & Pages"**
2. æˆ–è€…åœ¨ä¸»é é¢æœå°‹ã€ŒWorkers & Pagesã€

#### æ­¥é©Ÿ 3: æ‰¾åˆ° jinyi-app é …ç›®
1. åœ¨ Pages åˆ—è¡¨ä¸­æ‰¾åˆ° **"jinyi-app"** é …ç›®
2. é»æ“Šé€²å…¥é …ç›®è©³æƒ…é é¢

#### æ­¥é©Ÿ 4: æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹
æŸ¥çœ‹ "Deployments" æ¨™ç±¤ï¼Œç¢ºèªï¼š
- æœ€æ–°çš„éƒ¨ç½²æ˜¯å¦å°æ‡‰æœ€æ–°çš„ Git commit (`dc150b4` æˆ– `cc1311c`)
- éƒ¨ç½²ç‹€æ…‹æ˜¯å¦ç‚º Success / Building / Failed

#### æ­¥é©Ÿ 5A: å¦‚æœæ²’æœ‰è‡ªå‹•è§¸ç™¼éƒ¨ç½²
1. é»æ“Šé ‚éƒ¨çš„ **"Create deployment"** æŒ‰éˆ•
2. æˆ–è€…æ‰¾åˆ° **"Retry deployment"** æŒ‰éˆ•
3. é¸æ“‡ **Production branch**: `main`
4. é»æ“Š **"Save and Deploy"**

#### æ­¥é©Ÿ 5B: å¦‚æœå·²ç¶“åœ¨éƒ¨ç½²ä¸­
- ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 2-5 åˆ†é˜ï¼‰
- åˆ·æ–°é é¢æŸ¥çœ‹éƒ¨ç½²é€²åº¦

---

### æ–¹æ³• 2: é€é Git å¼·åˆ¶è§¸ç™¼éƒ¨ç½²

å¦‚æœ Cloudflare æ²’æœ‰è‡ªå‹•æª¢æ¸¬åˆ° GitHub çš„æ›´æ–°ï¼Œå¯ä»¥ç”¨ç©ºæäº¤ä¾†è§¸ç™¼ï¼š

```bash
# é€²å…¥é …ç›®ç›®éŒ„
cd "/Users/jack/Downloads/æ¸¬è©¦ 8 2"

# å‰µå»ºç©ºæäº¤ä¾†è§¸ç™¼éƒ¨ç½²
git commit --allow-empty -m "chore: è§¸ç™¼ Cloudflare Pages é‡æ–°éƒ¨ç½²"

# æ¨é€åˆ° GitHub
git push origin main
```

é€™æœƒå‰µå»ºä¸€å€‹æ–°çš„æäº¤ï¼Œå¼·åˆ¶ Cloudflare Pages é–‹å§‹æ–°çš„éƒ¨ç½²æµç¨‹ã€‚

---

### æ–¹æ³• 3: æª¢æŸ¥ Cloudflare Pages é…ç½®

#### ç¢ºèª Git æ•´åˆè¨­ç½®
1. åœ¨ Cloudflare Pages é …ç›®é é¢
2. é»æ“Š **"Settings"** æ¨™ç±¤
3. æª¢æŸ¥ **"Builds & deployments"** è¨­ç½®ï¼š
   - **Production branch** æ‡‰è©²æ˜¯ `main`
   - **Build command** æ‡‰è©²æ˜¯ `npm run build`
   - **Build output directory** æ‡‰è©²æ˜¯ `dist`
   - **Environment variables** æ‡‰è©²åŒ…å«:
     - `VITE_SUPABASE_URL`
     - `VITE_SUPABASE_ANON_KEY`
     - `GEMINI_API_KEY` (é¸ç”¨)

#### ç¢ºèªè‡ªå‹•éƒ¨ç½²å·²å•Ÿç”¨
1. åœ¨ Settings â†’ Builds & deployments
2. ç¢ºèª **"Automatic deployments"** å·²å•Ÿç”¨
3. ç¢ºèª **"Build watch paths"** æ²’æœ‰éåº¦é™åˆ¶

---

## ğŸ¯ é©—è­‰éƒ¨ç½²æˆåŠŸ

### éƒ¨ç½²å®Œæˆå¾Œï¼Œè«‹æª¢æŸ¥ä»¥ä¸‹å…§å®¹ï¼š

1. **è¨ªå•ç¶²ç«™**: https://jinyi-app.pages.dev
2. **æª¢æŸ¥é¦–é å‰¯æ¨™é¡Œ**: æ‡‰è©²é¡¯ç¤ºã€Œ**å¾ç¾å¥½çš„ä¸€å¤©é–‹å§‹**ã€ï¼ˆè€Œéã€Œå¾æ™ºæ…§é ç´„é–‹å§‹ã€ï¼‰
3. **æ¸¬è©¦ç³»çµ±è¨­å®šé é¢**:
   - ç™»å…¥ç®¡ç†å¾Œå° (admin@clinic.com / admin)
   - é€²å…¥ã€Œç³»çµ±è¨­å®šã€æ¨™ç±¤
   - ç¢ºèªçœ‹åˆ°æ–°çš„é›™æ¬„ä½ˆå±€è¨­è¨ˆ
   - ç¢ºèªå³æ™‚é è¦½åŠŸèƒ½æ­£å¸¸é‹ä½œ
   - ç¢ºèªé›²ç«¯åŒæ­¥ç‹€æ…‹é¡¯ç¤ºæ­£å¸¸

### æ¸…é™¤ç€è¦½å™¨å¿«å–
å¦‚æœéƒ¨ç½²æˆåŠŸä½†ä»çœ‹åˆ°èˆŠå…§å®¹ï¼š
1. æŒ‰ `Cmd + Shift + R` (Mac) æˆ– `Ctrl + Shift + R` (Windows) å¼·åˆ¶åˆ·æ–°
2. æˆ–è€…åœ¨ DevTools ä¸­å‹¾é¸ "Disable cache" ä¸¦åˆ·æ–°
3. æˆ–è€…ä½¿ç”¨ç„¡ç—•æ¨¡å¼è¨ªå•ç¶²ç«™

---

## ğŸ“‹ Cloudflare Pages æ§‹å»ºè¨­å®š

### ç•¶å‰æ‡‰è©²ä½¿ç”¨çš„è¨­å®š

```yaml
Framework preset: None (æˆ– Vite)
Build command: npm run build
Build output directory: /dist
Root directory: /
Node.js version: 18 æˆ–æ›´é«˜
```

### ç’°å¢ƒè®Šæ•¸

**Production ç’°å¢ƒè®Šæ•¸** (å¿…é ˆè¨­å®š):
```
VITE_SUPABASE_URL=ä½ çš„_Supabase_URL
VITE_SUPABASE_ANON_KEY=ä½ çš„_Supabase_åŒ¿åé‡‘é‘°
```

**Preview ç’°å¢ƒè®Šæ•¸** (é¸ç”¨ï¼Œèˆ‡ Production ç›¸åŒ):
```
VITE_SUPABASE_URL=ä½ çš„_Supabase_URL
VITE_SUPABASE_ANON_KEY=ä½ çš„_Supabase_åŒ¿åé‡‘é‘°
```

---

## ğŸ› å¸¸è¦‹å•é¡Œæ’é™¤

### Q1: Cloudflare æ²’æœ‰è‡ªå‹•é–‹å§‹æ–°çš„éƒ¨ç½²
**è§£æ±ºæ–¹æ¡ˆ**:
- ç¢ºèª Cloudflare Pages çš„ Git æ•´åˆç‹€æ…‹
- å˜—è©¦æ–¹æ³• 2: å‰µå»ºç©ºæäº¤å¼·åˆ¶è§¸ç™¼
- æª¢æŸ¥ GitHub çš„ Webhooks è¨­ç½®

### Q2: éƒ¨ç½²å¤±æ•—ï¼ˆBuild failedï¼‰
**è§£æ±ºæ–¹æ¡ˆ**:
1. åœ¨ Cloudflare Dashboard ä¸­æŸ¥çœ‹æ§‹å»ºæ—¥èªŒ
2. ç¢ºèªæ‰€æœ‰ç’°å¢ƒè®Šæ•¸éƒ½å·²æ­£ç¢ºè¨­ç½®
3. ç¢ºèª Node.js ç‰ˆæœ¬æ­£ç¢º (18+)
4. æª¢æŸ¥ `package.json` ä¸­çš„ä¾è³´æ˜¯å¦æ­£ç¢º

### Q3: éƒ¨ç½²æˆåŠŸä½†ç¶²ç«™æ²’æœ‰æ›´æ–°
**è§£æ±ºæ–¹æ¡ˆ**:
1. æ¸…é™¤ç€è¦½å™¨å¿«å– (Cmd+Shift+R)
2. ç­‰å¾… CDN å¿«å–æ›´æ–°ï¼ˆå¯èƒ½éœ€è¦ 5-10 åˆ†é˜ï¼‰
3. ä½¿ç”¨ç„¡ç—•æ¨¡å¼è¨ªå•ç¢ºèª
4. æª¢æŸ¥æ˜¯å¦è¨ªå•çš„æ˜¯æ­£ç¢ºçš„ URL (https://jinyi-app.pages.dev)

### Q4: ç³»çµ±è¨­å®šæ²’æœ‰åŒæ­¥åˆ° Supabase
**è§£æ±ºæ–¹æ¡ˆ**:
1. ç¢ºèª `.env.local` æˆ– Cloudflare ç’°å¢ƒè®Šæ•¸ä¸­çš„ Supabase æ†‘è­‰æ­£ç¢º
2. åœ¨ç€è¦½å™¨ Console æª¢æŸ¥æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
3. ç™»å…¥ Supabase Dashboard æª¢æŸ¥ `user_data` è¡¨

---

## ğŸ“ éœ€è¦å”åŠ©ï¼Ÿ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½ç„¡æ³•è§£æ±ºå•é¡Œï¼š

1. **æª¢æŸ¥ Cloudflare æ§‹å»ºæ—¥èªŒ**
   - åœ¨ Cloudflare Dashboard â†’ jinyi-app â†’ Deployments
   - é»æ“Šæœ€æ–°çš„éƒ¨ç½²ï¼ŒæŸ¥çœ‹è©³ç´°æ—¥èªŒ

2. **æª¢æŸ¥ GitHub Actions**
   - å‰å¾€ https://github.com/a0986215615-boop/jinyi-app/actions
   - æŸ¥çœ‹æ˜¯å¦æœ‰å¤±æ•—çš„å·¥ä½œæµ

3. **é‡æ–°é€£æ¥ Git å€‰åº«**
   - åœ¨ Cloudflare Pages è¨­ç½®ä¸­
   - æ–·é–‹ä¸¦é‡æ–°é€£æ¥ GitHub å€‰åº«

---

## âœ… æˆåŠŸæ¨™èªŒ

ç•¶ä½ çœ‹åˆ°ä»¥ä¸‹æƒ…æ³ï¼Œè¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼š

- âœ… Cloudflare Dashboard é¡¯ç¤ºæœ€æ–°éƒ¨ç½²ç‚º "Success"
- âœ… éƒ¨ç½²å°æ‡‰çš„ commit æ˜¯ `dc150b4` æˆ–æ›´æ–°
- âœ… ç¶²ç«™é¦–é å‰¯æ¨™é¡Œé¡¯ç¤ºã€Œå¾ç¾å¥½çš„ä¸€å¤©é–‹å§‹ã€
- âœ… ç³»çµ±è¨­å®šé é¢é¡¯ç¤ºæ–°çš„é›™æ¬„ä½ˆå±€è¨­è¨ˆ
- âœ… å³æ™‚é è¦½å’Œé›²ç«¯åŒæ­¥ç‹€æ…‹æ­£å¸¸é‹ä½œ

---

**æœ€å¾Œæ›´æ–°**: 2025-12-27  
**é …ç›® URL**: https://jinyi-app.pages.dev  
**GitHub**: https://github.com/a0986215615-boop/jinyi-app
